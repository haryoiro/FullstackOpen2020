{"version":3,"sources":["components/Togglable.js","components/Blog.js","components/BlogList.js","components/BlogForm.js","components/LoginForm.js","components/Message.js","services/blogs.js","services/login.js","App.js","index.js"],"names":["Togglable","React","forwardRef","props","ref","useState","visible","setVisible","hideWhenVisible","display","showWhenVisible","toggleVisibility","useImperativeHandle","onClick","style","buttonLabel","secondButtonLabel","children","Blog","blog","updateLikes","likes","setLikes","addLikes","key","id","margin","padding","border","title","url","author","BlogList","blogs","Sref","map","BlogForm","handleSubmit","setTitle","setAuthor","setUrl","onSubmit","event","preventDefault","type","value","onChange","target","autoComplete","LoginForm","handleLogin","password","setPassword","username","setUsername","Message","message","className","status","token","config","headers","Authorization","replace","setToken","newToken","getAll","axios","get","then","response","data","create","newObject","a","post","request","put","res","login","credentials","App","setBlogs","error","errorMessage","setErrorMessage","useEffect","blogService","loggedUserJSON","window","localStorage","getItem","user","JSON","parse","loginObject","loginService","setItem","stringify","setTimeout","handleLogout","clear","blogFormRef","createRef","handleBlogSubmit","blogObject","current","addedBlog","concat","addLikesRef","toUpperCase","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.dbb4d106.chunk.js","sourcesContent":["import React, { useState, useImperativeHandle } from 'react'\n\nconst Togglable = React.forwardRef((props, ref) => {\n  const [visible, setVisible] = useState(true)\n\n  const hideWhenVisible = { display : visible ? '' : 'none' }\n  const showWhenVisible = { display : visible ? 'none' : '' }\n\n  const toggleVisibility = () => {\n    setVisible(!visible)\n  }\n\n  useImperativeHandle(ref, () => {\n    return { toggleVisibility }\n  })\n\n  return (\n    <>\n      <button onClick={toggleVisibility} style={hideWhenVisible}>{props.buttonLabel}</button>\n      <button onClick={toggleVisibility} style={showWhenVisible}>{props.secondButtonLabel}</button>\n      <div style={showWhenVisible}>{props.children}</div>\n    </>\n  )\n})\n\nexport default Togglable","import React, { useState, useImperativeHandle } from 'react'\r\nimport Togglable from './Togglable'\r\n\r\nconst Blog = React.forwardRef(({ blog, updateLikes }, ref) => {\r\n  const [likes, setLikes] = useState(blog.likes)\r\n\r\n  const style = {\r\n    margin: '5px 0',\r\n    padding: '5px 10px',\r\n    border: '1px solid black',\r\n  }\r\n\r\n  const addLikes = () => {\r\n    setLikes(likes+1)\r\n    updateLikes({\r\n      ...blog,\r\n      likes: likes+1\r\n    })\r\n  }\r\n\r\n  useImperativeHandle(ref, () => {\r\n    return {\r\n      addLikes\r\n    }\r\n  })\r\n\r\n  return (\r\n    <div key={blog.id} style={style}>\r\n      {blog.title + '　'}\r\n      <Togglable buttonLabel='view' secondButtonLabel='hide'>\r\n        <div>{blog.url+'\\n'} </div>\r\n        <div>{likes+'\\n'} <button onClick={addLikes}>LIKE</button> </div>\r\n        <div>{blog.author} </div>\r\n      </Togglable>\r\n    </div>\r\n  )\r\n}\r\n)\r\nexport default Blog\r\n","import React from 'react'\nimport Blog from './Blog'\n\nconst BlogList = ({ blogs, updateLikes, Sref }) => {\n\n\n  return (\n  <div>\n    {blogs.map(blog =>\n      <Blog key={blog.id} blog={blog} updateLikes={updateLikes} ref={Sref}/>\n    )}\n  </div>\n  )\n}\nexport default BlogList","import React, { useState } from 'react'\n\nconst BlogForm = ({ handleSubmit, ref }) => {\n  const [title, setTitle] = useState('')\n  const [author, setAuthor] = useState('')\n  const [url, setUrl] = useState('')\n\n  const handleChangeTitle = (event) => {\n    setTitle(event.target.value)\n  }\n\n  const handleChangeAuthor = (event) => {\n    setAuthor(event.target.value)\n  }\n\n  const handleChangeUrl = (event) => {\n    setUrl(event.target.value)\n  }\n\n  const addBlog = (event) => {\n    event.preventDefault()\n\n    handleSubmit({\n      title: title,\n      author: author,\n      url: url,\n    })\n\n    setTitle('')\n    setAuthor('')\n    setUrl('')\n  }\n\n  return (\n    <form onSubmit={addBlog}>\n      TITLE<br />\n      <input type=\"text\" value={title} onChange={handleChangeTitle} autoComplete=\"off\"/><br />\n      AUTHOR<br />\n      <input type=\"text\" value={author} onChange={handleChangeAuthor} autoComplete=\"off\"/><br />\n      URL<br />\n      <input type=\"text\" value={url} onChange={handleChangeUrl} autoComplete=\"off\" /><br />\n      <input type=\"submit\" value=\"POST\" />\n      <br />\n      <br />\n    </form>\n  )\n}\n\nexport default BlogForm","import React, { useState } from 'react'\n\nconst LoginForm = ({ handleLogin }) => {\n  const [password, setPassword] = useState('')\n  const [username, setUsername] = useState('')\n\n  const handleChangeUser = (event) => {\n    setUsername(event.target.value)\n  }\n  const handleChangePassword = (event) => {\n    setPassword(event.target.value)\n  }\n  const userLogin = (event) => {\n    event.preventDefault()\n    handleLogin({\n      username: username,\n      password: password,\n    })\n    setUsername('')\n    setPassword('')\n  }\n\n  return (\n    <>\n      <form onSubmit={userLogin}>\n        USERNAME\n        <input type=\"text\" value={username} onChange={handleChangeUser}/><br/>\n        PASSWORD\n        <input type=\"text\" value={password} onChange={handleChangePassword}/><br/>\n        <input type=\"submit\" value=\"LOGIN\" />\n      </form>\n    </>\n)\n}\n\nexport default LoginForm","import React from 'react'\n\nconst Message = ({ message }) => (\n  <>\n  {message.message !== null &&\n    <div className=\"message\">\n      {message.status\n        ? <div className=\"error\">{message.message}</div>\n        : <div className=\"success\">{message.message}</div>\n      }\n    </div>\n  }\n  </>\n)\n\nexport default Message\n","import axios from 'axios'\nconst baseUrl = '/api/blogs'\n\nlet token = ''\n\nconst config = {\n  headers: { Authorization: token.replace(/\\n/g, '') }\n}\n\nconst setToken = ( newToken ) => {\n  token = `Bearer ${newToken}`\n}\n\nconst getAll = () => {\n  const request = axios.get(baseUrl)\n  return request.then(response => response.data)\n}\n\nconst create = async (newObject) => {\n  const request = await axios.post(baseUrl, newObject, config)\n  return request.data\n}\n\nconst addLikes = async (id, post) => {\n  const request = axios.put(`${baseUrl}/${id}`, post, config)\n  return request.then((res) => res.data)\n}\n\nexport default {\n  setToken,\n  getAll,\n  create,\n  addLikes,\n }","import axios from 'axios'\nconst baseUrl = '/api/login'\n\nconst login = async credentials => {\n  const res = await axios.post(baseUrl, credentials)\n  return res.data\n}\n\n\nexport default { login }","import React, { useState, useEffect } from 'react'\n\nimport BlogList from './components/BlogList'\nimport BlogForm from './components/BlogForm'\nimport LoginForm from './components/LoginForm'\nimport Message from './components/Message'\nimport Togglable from './components/Togglable'\n\nimport blogService from './services/blogs'\nimport loginService from './services/login'\n\nimport './App.css'\nimport blogs from './services/blogs'\n\nconst App = () => {\n  const [blogs, setBlogs] = useState([])\n  const [username, setUsername] = useState(null)\n  const [errorMessage, setErrorMessage] = useState({ message: null, error: false })\n\n  useEffect(() => {\n    blogService.getAll().then(blogs =>\n      setBlogs( blogs )\n    )\n  }, [])\n\n  useEffect(() => {\n    const loggedUserJSON = window.localStorage.getItem('loggedInBlogUser')\n    if (loggedUserJSON) {\n      const user = JSON.parse(loggedUserJSON)\n      setUsername(user)\n      blogService.setToken(user.token)\n    }\n  }, [])\n\n  const handleLogin = async (loginObject) => {\n    try {\n      const user = await loginService.login(loginObject)\n      window.localStorage.setItem('loggedInBlogUser', JSON.stringify(user))\n      await blogService.setToken(user.token)\n\n      setUsername(user)\n    } catch (err) {\n      setErrorMessage({ message: 'Wrong username or password', status: true })\n      setTimeout(() => {\n        setErrorMessage({ message: null, error: false })\n      }, 3000)\n    }\n  }\n\n  const handleLogout = async (event) => {\n    event.preventDefault()\n\n    window.localStorage.clear()\n    setUsername(null)\n\n    setErrorMessage({ message: 'Logout success', status: false })\n    setTimeout(() => { setErrorMessage({ message: null, error: false }) }, 3000)\n  }\n\n  const blogFormRef = React.createRef()\n\n  const handleBlogSubmit = async (blogObject) => {\n    try {\n      blogFormRef.current.toggleVisibility()\n      const addedBlog = await blogService.create(blogObject)\n      setBlogs(blogs.concat(addedBlog))\n\n      setErrorMessage({ message: `a new blog ${blogObject.title} added`, status: false })\n      setTimeout(() => { setErrorMessage({ message: null, error: false }) }, 3000)\n\n    } catch (err) {\n      setErrorMessage({ message: `${err}`, status: true })\n      setTimeout(() => { setErrorMessage({ message: null, error: false }) }, 3000)\n    }\n  }\n\n  const addLikesRef = React.createRef()\n\n  const updateLikes = async (blogObject) => {\n    try {\n      addLikesRef.current.addLikes()\n      await blogService.addLikes(blogObject.id, blogObject)\n      await setBlogs(blogs.map((blog) => blog.id !== blogObject.id ? blog : blogObject))\n    } catch (err) {\n      setErrorMessage(err)\n    }\n  }\n\n\n  return (\n    <div>\n      <h2>BLOGS</h2>\n      <Message message={errorMessage} />\n      {username !== null ?\n        <>\n          <div>\n            {username.username.toUpperCase()} LOGGED IN　\n            <button onClick={handleLogout}>LOGOUT</button>\n          </div>\n          <Togglable buttonLabel='NEW POST' ref={blogFormRef} secondButtonLabel='CANCEL'>\n            <h3>CREATE NEW</h3>\n            <BlogForm handleSubmit={handleBlogSubmit}/>\n          </Togglable>\n          <BlogList blogs={blogs} updateLikes={updateLikes} Sref={addLikesRef}/>\n        </> :\n        <Togglable buttonLabel='LOGIN' secondButtonLabel='CANCEL'>\n          <LoginForm handleLogin={handleLogin}/>\n        </Togglable>\n      }\n    </div>\n  )\n}\n\nexport default App","import React from 'react'\nimport ReactDOM from 'react-dom'\nimport App from './App'\n\nReactDOM.render(<App />, document.getElementById('root'))"],"sourceRoot":""}